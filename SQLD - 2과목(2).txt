서브 쿼리 종류
1. 동작하는 방식에 따라
1) UN-CORRELATED(비연관) 서브쿼리
   - 서브 쿼리가 메인쿼리 컬럼을 가지고 있지 않은 형태의 서브쿼리
   - 메인쿼리에 서브쿼리가 실행된 결과 값을 제공하기 위한 목적으로 사용
2) CORRELATED(연관) 서브쿼리
   - 서브쿼리가 메인쿼리 컬럼을 가지고 있는 형태의 서브쿼리
   - 일반적으로 메인쿼리가 먼저 수행된 후에 서브쿼리에서 조건이 맞는지 확인하고자 할 때 사용

2. 위치에 따라
1) 스칼라 서브쿼리
  - SELECT에 사용하는 서브쿼리
  - 서브쿼리 결과를 마치 하나의 컬럼처럼 사용하기 위해 주로 사용
2) 인라인뷰
  - FROM절에 사용하는 서브쿼리
  - 서브쿼리 결과를 테이블처럼 사용하기 위해 주로 사용

3) WHERE절 서브쿼리
  - 가장 일반적인 서브쿼리
  - 비교 상수 자리에 값을 전달하기 위한 목적으로 주로 사용(상수항을 대체)

WHERE절 서브쿼리 종류
1) 단일행 서브쿼리
  - 서브쿼리 결과가 1개의 행이 리턴되는 형태

2) 다중행 서브쿼리
  - 서브쿼리 결과가 여러 행이 리턴되는 형태

다중행 서브쿼리 연산자
IN : 같은 값을 찾음
> ANY : 최소값을 반환함
< ANY : 최대값을 반환함
< ALL : 최소값을 반환함
> ALL : 최대값을 반환함

인라인뷰(Inline View)
 - 쿼리 안의 뷰의 형태로 테이블처럼 조회할 데이터를 정의하기 위해 사용

WINDOW FUNCTION
 - 서로 다른 행의 비교나 연산을 위해 만든 함수
 - GROUP BY를 쓰지 않고 그룹 연산 가능
 - LAG, LEAD, SUM, AVG, MIN, MAX, COUNT, RANK

PARTITION BY절 : 출력할 총 데이터 수 변화 없이 그룹연산 수행할 GROUP BY 컬럼

1. ROWS, RANGE 차이
1) ROWS : 값이 같더라도 각 행씩 연산
2) RANGE : 같은 값의 경우 하나의 RANGE로 묶어서 동시 연산(DEFAULT)

2. BETWEEN A AND B
A) 시작점 정의 
 - CURRENT ROW : 현재행부터
 - UNBOUNDED PRECEDING : 처음부터(DEFAULT)
 - N PRECEDING : N 이전부터

B) 마지막 시점 정의 
 - CURRENT ROW : 현재행부까지(DEFALUT)
 - UNBOUNDED FOLLOWING : 마지막까지
 - N FOLLOWING : N 이후까지

UNION : 합집합
INTERSECT : 교집합
MINUS : 차집합

VARIANCE / STDDEV
 - 평균과 표준편차
 - 표준편차는 평균값의 루트값

GROUP BY FUNCTIOIN
 - GROUP BY절에 사용하는 함수
 - 여러 GROUP BY결과를 동시에 출력(합집합)하는 기능
 - GROUP BY기능 : 그룹별 연산값만 출력되므로 전체 소계와 함께 출력될 수 없음

순위 관련 함수
1) RANK(순위)
 RANK WITHIN GROUP
  - 특정값에 대한 순위 확인
  - 윈도우함수가 아닌 일반함수

2) RANK() OVER()
 - 전체 중/특정 그룹 중 값의 순위 확인 
 - ORDER BY절 필수

3) DENSE_RANK
 - 누적순위
 - 값이 같을 때 동일한 순위 부여 후 다음 순위가 바로 이어지는 순위 부여 방식

4) ROW NUMBER
 - 연속된 행 번호
 - 동일한 순위를 인정하지 않고 단순히 순서대로 나열한대로의 순서 값 리턴

LAG, LEAD
 - 행 순서대로 각각 이전 값(LAG), 이후 값(LEAD) 가져오기
 - ORDER BY절 필수

FIRST_VALUE, LAST_VALUE
 - 정렬 순서대로 정해진 범위에서의 처음 값, 마지막 값 출력
 - 순서와 범위 정의에 따라 최솟값과 최댓값 리턴 가능

NTILE
 - 행을 특정 컬럼 순서에 따라 정해진 수의 그룹으로 나누기 위함 함수
 - 그룹 번호가 리턴됨
 - ORDER BY 필수
 - PARTITION BY를 사용하여 특정 그룹을 또 원하는 수 만큼 그룹 분리 가능

비율관련 함수
1) RATIO_TO_REPORT
 - 각 값의 비율 리턴(전체 비율 또는 특정 그룹 내 비율 가능)
 - ORDER BY 사용불가

2) CUME_DIST
 - 각 값의 누적 비율 리턴(전체 비율 또는 특정 그룹 내 비율 가능)
 - ORDER BY 필수(누적비율을 구하는 순서 정할 수 있음)

3) PERCENT_RANK
 - PERCENTILE(분위수) 출력
 - 전체 COUNT 중 상대적 위치 출력(0 ~ 1 범위 내0
 - ORDER BY 필수






























